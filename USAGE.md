# Vulnerability Scanner Usage Guide

This guide provides instructions on how to use the Vulnerability Scanner, including how to start OWASP ZAP and run the scanner.

## Prerequisites

- Python 3.7 or higher
- OWASP ZAP (Zed Attack Proxy)
- Required Python packages (install using `pip install -r requirements.txt`)

## Starting OWASP ZAP

1. Download and install OWASP ZAP from the official website: https://www.zaproxy.org/download/

2. Start ZAP in daemon mode:

   For Windows:
   ```
   zap.bat -daemon -config api.key=your-api-key-here
   ```

   For Linux/Mac:
   ```
   ./zap.sh -daemon -config api.key=your-api-key-here
   ```

   Replace `your-api-key-here` with a secure API key of your choice.

3. Note the port number on which ZAP is running. By default, it's usually 8080.

## Configuring the Scanner

1. Create a `config.yaml` file in the same directory as the scanner script with the following content:

   ```yaml
   zap_url: "http://localhost:8080"
   user_agent: "Vulnerability Scanner v1.0"
   rate_limit_max: 10
   rate_limit_time: 1
   ```

   Adjust the `zap_url` if ZAP is running on a different port or machine.

2. Ensure you have all required Python packages installed:

   ```
   pip install -r requirements.txt
   ```

## Running the Vulnerability Scanner

Use the following command to run the scanner:

```
python vulnerability_scanner.py example.com --apikey your-api-key-here --output results.json --config config.yaml
```

Replace the following:
- `example.com` with the target domain you want to scan
- `your-api-key-here` with the API key you set when starting ZAP
- `results.json` with your desired output file name

Additional options:
- `--timeout 300`: Set the timeout for ZAP scan (in seconds)
- `--debug`: Enable debug logging
- `--proxy http://proxy-server:port`: Use a proxy server for scanning
- `--resume`: Resume from the last scan

## Example Usage

1. Start ZAP:
   ```
   ./zap.sh -daemon -config api.key=myapikey123
   ```

2. Run the scanner:
   ```
   python vulnerability_scanner.py example.com --apikey myapikey123 --output scan_results.json --config config.yaml --timeout 600
   ```

3. Review the results in `scan_results.json` after the scan completes.

## Important Notes

- Ensure you have permission to scan the target domain before proceeding.
- The scanner will prompt for confirmation before starting the scan.
- The scan duration depends on the number of subdomains and the complexity of the target website.
- Always use this tool responsibly and ethically.

## Troubleshooting

- If you encounter connection errors, ensure ZAP is running and the `zap_url` in `config.yaml` is correct.
- For "API key not valid" errors, make sure the API key used in the scanner command matches the one set when starting ZAP.
- If subdomain discovery is slow, you may need to adjust your network settings or use a more powerful machine.

For more information on using OWASP ZAP, refer to the official documentation: https://www.zaproxy.org/docs/